From 4ebf7dc21a9e839503ce1f1a3580b3d7d2dcdc6a Mon Sep 17 00:00:00 2001
From: Harsh Shandilya <me@msfjarvis.dev>
Date: Sun, 24 Jan 2021 16:26:22 +0530
Subject: [PATCH] compat: skb_mark_not_on_list was backported to 4.14

---
 net/wireguard/compat/compat.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/net/wireguard/compat/compat.h b/net/wireguard/compat/compat.h
index 9f6e725db531..981df1210ba2 100644
--- a/net/wireguard/compat/compat.h
+++ b/net/wireguard/compat/compat.h
@@ -826,7 +826,7 @@ static __always_inline void old_rcu_barrier(void)
 #define COMPAT_CANNOT_DEPRECIATE_BH_RCU
 #endif
 
-#if LINUX_VERSION_CODE < KERNEL_VERSION(4, 19, 10) && !defined(ISRHEL8)
+#if (LINUX_VERSION_CODE < KERNEL_VERSION(4, 19, 10) || LINUX_VERSION_CODE < (4, 14, 217)) && !defined(ISRHEL8)
 static inline void skb_mark_not_on_list(struct sk_buff *skb)
 {
 	skb->next = NULL;
